# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–±–ª–µ–º–∞:
`ConnectionDoesNotExistError: connection was closed in the middle of operation`

## –ü—Ä–∏—á–∏–Ω–∞:
SQLAlchemy —á–µ—Ä–µ–∑ asyncpg –Ω–∞ Windows –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—É–ª–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π. –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ asyncpg —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ SQLAlchemy engine –Ω–µ –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

## –†–µ—à–µ–Ω–∏–µ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL –∏ –±–æ—Ç–∞ (–ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ —ç—Ç–æ)

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞** (Ctrl+C –≤ –æ–∫–Ω–µ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏)

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL —á–µ—Ä–µ–∑ –°–ª—É–∂–±—ã Windows:**
   - –ù–∞–∂–º–∏—Ç–µ `Win + R`
   - –í–≤–µ–¥–∏—Ç–µ `services.msc`
   - –ù–∞–π–¥–∏—Ç–µ `postgresql-x64-18`
   - –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å** (Restart)
   - –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 —Å–µ–∫—É–Ω–¥

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∑–∞–Ω–æ–≤–æ:**
   ```bash
   python bot.py
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π event loop policy (–¥–ª—è Windows)

–ü—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ event loop –Ω–∞ Windows. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å `bot.py`:

–î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—á–∞–ª–æ `bot.py` (–ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–æ–≤):
```python
import sys
if sys.platform == 'win32':
    asyncio.set_event_loop_policy(asyncio.WindowsSelectorEventLoopPolicy())
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL

1. –û—Ç–∫—Ä–æ–π—Ç–µ pgAdmin
2. –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ PostgreSQL ‚Üí Properties
3. –í–∫–ª–∞–¥–∫–∞ "Connection" - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 5432 –∏ host localhost –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

### –í–∞—Ä–∏–∞–Ω—Ç 4: –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQLite

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ SQLite (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞).

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

**–°–Ω–∞—á–∞–ª–∞ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 1** - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ PostgreSQL —á–∞—Å—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏.

–ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–∂–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 2 - –∏–∑–º–µ–Ω–µ–Ω–∏–µ event loop policy –¥–ª—è Windows.
